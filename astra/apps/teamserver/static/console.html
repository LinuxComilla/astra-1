<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script src="/static/client.js"></script>
        <script>
            jQuery(document).ready(function() {
                var input = jQuery('textarea[name=message]');
                var output = jQuery('div#output');
                var client = new AstraClient('ws://10.211.55.10:8080/ws');
                client.onopen = function() {
                    var stdin = 'astra.clients.' + client.session_id + '.stdin';
                    var stdout = 'astra.clients.' + client.session_id + '.stdout';
                    var stderr = 'astra.clients.' + client.session_id + '.stderr';

                    client.onevent(stdout, function(data) {
                        console.log(data.kwargs.message);
                    });

                    client.onevent(stderr, function(data) {
                        console.error(data.kwargs.message);
                    });

                    console.log('Publishing to ' + stdin);
                    client.publish(stdin, {}, ['this is a test']);
                    client.publish(stdin, {}, []);
                };
            });
        </script>
    </head>
    <body>
        <textarea name="message"></textarea>
        <button id="send">Send</button>
        <div id="output">
        </div>
    </body>
</html>
